using System;
using System.Collections.Generic;

namespace TraductorBasico
{
    class Program
    {
        static void Main(string[] args)
        {
            // Diccionario inicial (inglés -> español)
            Dictionary<string, string> diccionario = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase)
            {
                {"time", "tiempo"},
                {"person", "persona"},
                {"year", "año"},
                {"way", "camino"},
                {"day", "día"},
                {"thing", "cosa"},
                {"man", "hombre"},
                {"world", "mundo"},
                {"life", "vida"},
                {"hand", "mano"},
                {"part", "parte"},
                {"child", "niño"},
                {"eye", "ojo"},
                {"woman", "mujer"},
                {"place", "lugar"},
                {"work", "trabajo"},
                {"week", "semana"},
                {"case", "caso"},
                {"point", "punto"},
                {"government", "gobierno"},
                {"company", "empresa"}
            };

            int opcion;
            do
            {
                Console.Clear();
                Console.WriteLine("==================== MENÚ ====================");
                Console.WriteLine("1. Traducir una frase");
                Console.WriteLine("2. Agregar palabras al diccionario");
                Console.WriteLine("0. Salir");
                Console.Write("Seleccione una opción: ");

                if (!int.TryParse(Console.ReadLine(), out opcion))
                {
                    Console.WriteLine("Opción inválida. Presione una tecla para continuar...");
                    Console.ReadKey();
                    continue;
                }

                switch (opcion)
                {
                    case 1:
                        TraducirFrase(diccionario);
                        break;

                    case 2:
                        AgregarPalabra(diccionario);
                        break;

                    case 0:
                        Console.WriteLine("Saliendo del programa...");
                        break;

                    default:
                        Console.WriteLine("Opción inválida.");
                        break;
                }

                if (opcion != 0)
                {
                    Console.WriteLine("\nPresione una tecla para volver al menú...");
                    Console.ReadKey();
                }

            } while (opcion != 0);
        }

        static void TraducirFrase(Dictionary<string, string> diccionario)
        {
            Console.Write("\nIngrese una frase: ");
            string frase = Console.ReadLine();

            string[] palabras = frase.Split(' ', StringSplitOptions.RemoveEmptyEntries);
            List<string> resultado = new List<string>();

            foreach (var palabra in palabras)
            {
                // Eliminamos puntuación al final de la palabra
                string limpia = palabra.Trim(new char[] { '.', ',', ';', '!', '?' });

                // Buscamos en el diccionario (bidireccional inglés <-> español)
                if (diccionario.ContainsKey(limpia.ToLower()))
                {
                    resultado.Add(diccionario[limpia.ToLower()]);
                }
                else if (diccionario.ContainsValue(limpia.ToLower()))
                {
                    // Si el usuario escribe en español, se traduce al inglés
                    foreach (var kvp in diccionario)
                    {
                        if (kvp.Value.Equals(limpia, StringComparison.OrdinalIgnoreCase))
                        {
                            resultado.Add(kvp.Key);
                            break;
                        }
                    }
                }
                else
                {
                    // Si no está en el diccionario, se deja igual
                    resultado.Add(limpia);
                }
            }

            Console.WriteLine("\nTraducción: " + string.Join(" ", resultado));
        }

        static void AgregarPalabra(Dictionary<string, string> diccionario)
        {
            Console.Write("\nIngrese la palabra en inglés: ");
            string ingles = Console.ReadLine().Trim().ToLower();

            Console.Write("Ingrese la traducción en español: ");
            string espanol = Console.ReadLine().Trim().ToLower();

            if (!diccionario.ContainsKey(ingles))
            {
                diccionario.Add(ingles, espanol);
                Console.WriteLine("Palabra agregada correctamente.");
            }
            else
            {
                Console.WriteLine("La palabra ya existe en el diccionario.");
            }
        }
    }
}
